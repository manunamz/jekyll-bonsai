@charset "UTF-8";

//
// Styles for rendered markdown in the .main-content container
//
// stylelint-disable selector-no-type, max-nesting-depth, selector-max-compound-selectors, selector-max-type

.main-content {
  line-height: $content-line-height;
  counter-reset: sidenote-counter;

  ol,
  ul,
  dl,
  pre,
  address,
  blockquote,
  .table-wrapper {
    margin-top: 0.5em;
  }

  a {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  ul,
  ol {
    padding-left: 1.5em;
  }

  li {
    .highlight {
      margin-top: $sp-1;
    }
  }

  ol {
    list-style-type: none;
    counter-reset: step-counter;

    > li {
      position: relative;

      &::before {
        position: absolute;
        top: 0.2em;
        left: -1.6em;
        color: $grey-dk-000;
        content: counter(step-counter);
        counter-increment: step-counter;
        @include fs-3;

        @include mq(sm) {
          top: 0.11em;
        }
      }

      ol {
        counter-reset: sub-counter;

        li {
          &::before {
            content: counter(sub-counter, lower-alpha);
            counter-increment: sub-counter;
          }
        }
      }
    }
  }

  ul {
    list-style: none;

    > li {
      &::before {
        position: absolute;
        margin-left: -1.4em;
        color: $grey-dk-000;
        content: "â€¢";
      }
    }
  }

  .task-list {
    padding-left: 0;
  }

  .task-list-item {
    display: flex;
    align-items: center;

    &::before {
      content: "";
    }
  }

  .task-list-item-checkbox {
    margin-right: 0.6em;
  }

  hr + * {
    margin-top: 0;
  }

  h1:first-of-type {
    margin-top: 0.5em;
  }

  dl {
    display: grid;
    grid-template: auto / 10em 1fr;
  }

  dt,
  dd {
    margin: 0.25em 0;
  }

  dt {
    grid-column: 1;
    font-weight: 500;
    text-align: right;
    &::after {
      content: ":";
    }
  }

  dd {
    grid-column: 2;
    margin-bottom: 0;
    margin-left: 1em;
    blockquote,
    div,
    dl,
    dt,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    li,
    ol,
    p,
    pre,
    table,
    ul,
    .table-wrapper {
      &:first-child {
        margin-top: 0;
      }
    }
  }

  dd,
  ol,
  ul {
    dl:first-child {
      dt:first-child,
      dd:nth-child(2) {
        margin-top: 0;
      }
    }
  }

  .anchor-heading {
    position: absolute;
    right: -$sp-4;
    width: $sp-5;
    height: 100%;
    padding-right: $sp-1;
    padding-left: $sp-1;
    overflow: visible;

    @include mq(md) {
      right: auto;
      left: -$sp-5;
    }

    svg {
      display: inline-block;
      width: 100%;
      height: 100%;
      color: $link-color;
      visibility: hidden;
    }
  }

  .anchor-heading:hover,
  h1:hover > .anchor-heading,
  h2:hover > .anchor-heading,
  h3:hover > .anchor-heading,
  h4:hover > .anchor-heading,
  h5:hover > .anchor-heading,
  h6:hover > .anchor-heading {
    svg {
      visibility: visible;
    }
  }

  summary {
    cursor: pointer;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    position: relative;
    margin-top: 1.5em;
    margin-bottom: 0.25em;

    &:first-child {
      margin-top: $sp-2;
    }

    + table,
    + .table-wrapper,
    + .code-example,
    + .highlighter-rouge {
      margin-top: 1em;
    }

    + p {
      margin-top: 0;
    }
  }

/* Sidenotes, margin notes, figures, captions */
// this is great, i was wondering what some other layout options were (these are sidenote-speicific): https://www.gwern.net/Sidenotes

// img {
//   max-width: 100%;
// }

// TODO: have separate counters for right and left side.

// label.sidenote-toggle:not(.sidenote-number) {
//   display: inline;
// }

// .rsn,
// .lsn {
//   display: none;
// }

// .sidenote-toggle:checked + .rsn,
// .sidenote-toggle:checked + .lsn {
//   display: block;
//   float: left;
//   left: 1rem;
//   clear: both;
//   width: 95%;
//   margin: 1rem 2.5%;
//   vertical-align: baseline;
//   position: relative;
// }

/******************
 * right sidenote *
 ******************/
 
.rsn {
  @include sidenote-container;
  display: none;
  word-wrap: break-word;

  @include mq(lg) {
    display: block;
    float: right;
    clear: right;

    margin-right: -(.75 * ($content-width * (1/2)));
    width: .75 * ($content-width / 2);
    margin-top: $sp-1;
    margin-bottom: 0;
    font-size: $font-size-2;
    // line-height: 1.3;
    vertical-align: baseline;
    position: relative;
  }
}

/*****************
 * left sidenote *
 *****************/

.lsn {
  @include sidenote-container;
  display: none;
  word-wrap: break-word;

  @include mq(lg) {
    display: block;
    float: left;
    clear: left;

    margin-left: -(.75 * ($content-width * (1/2)));
    width: .75 * ($content-width / 2);
    margin-top: $sp-1;
    margin-bottom: 0;
    font-size: $font-size-2;
    // line-height: 1.3;
    vertical-align: baseline;
    position: relative;
  }
}

/********************
 * general sidenote *
 ********************/

.sidenote-toggle:checked + .rsn,
.sidenote-toggle:checked + .lsn {
  display: block;
  float: left;
  left: 1rem;
  clear: both;
  width: 95%;
  margin: 1rem 2.5%;
  vertical-align: baseline;
  position: relative;
}

label.sidenote-toggle:not(.sidenote-number) {
  display: inline;
}

.sidenote-number {
  counter-increment: sidenote-counter;
}

input.sidenote-toggle {
  display: none;
}

label.sidenote-number {
  display: inline;
}

label.sidenote-toggle:not(.sidenote-number) {
  display: none;
}

.sidenote-number:after,
.rsn:before,
.lsn:before {
  position: relative;
  vertical-align: baseline;
}

.sidenote-number:after {
  content: counter(sidenote-counter);
  font-size: $font-size-2;
  top: -$sp-3;
  left: $sp-1;
}

.rsn:before,
.lsn:before {
  content: counter(sidenote-counter) " ";
  font-size: $font-size-2;
  top: -$sp-2;
}

blockquote .rsn,
blockquote .lsn {
  margin-right: -82%;
  min-width: 59%;
  text-align: left;
}

// div.fullwidth,
// table.fullwidth {
//   width: 100%;
// }

// div.table-wrapper {
//   overflow-y: auto;
//   font-family: "Trebuchet MS", "Gill Sans", "Gill Sans MT", sans-serif;
// }

// .sans {
//   font-family: "Gill Sans", "Gill Sans MT", Calibri, sans-serif;
//   letter-spacing: .03em;
// }

// code, pre > code {
//   font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
//   font-size: 1.0rem;
//   line-height: 1.42;
//   -webkit-text-size-adjust: 100%; /* Prevent adjustments of font size after orientation changes in iOS. See https://github.com/edwardtufte/tufte-css/issues/81#issuecomment-261953409 */
// }

// .sans > code {
//   font-size: 1.2rem;
// }

// h1 > code,
// h2 > code,
// h3 > code {
//   font-size: 0.80em;
// }

.rsn > code,
.lsn > code {
  font-size: 1rem;
}

// pre > code {
//   font-size: 0.9rem;
//   width: 52.5%;
//   margin-left: 2.5%;
//   overflow-y: auto;
//   display: block;
// }

// pre.fullwidth > code {
//   width: 90%;
// }

// .fullwidth {
//   max-width: 90%;
//   clear:both;
// }

// span.newthought {
//   font-variant: small-caps;
//   font-size: 1.2em;
// }

// input.sidenote-toggle {
//   display: none;
// }

// label.sidenote-number {
//   display: inline;
// }

// label.sidenote-toggle:not(.sidenote-number) {
//   display: none;
// }

// .iframe-wrapper {
//   position: relative;
//   padding-bottom: 56.25%; /* 16:9 */
//   padding-top: 25px;
//   height: 0;
// }

// .iframe-wrapper iframe {
//   position: absolute;
//   top: 0;
//   left: 0;
//   width: 100%;
//   height: 100%;
// }

// @media (max-width: 760px) {
  // body {
  //     width: 84%;
  //     padding-left: 8%;
  //     padding-right: 8%;
  // }

  // hr,
  // section > p,
  // section > footer,
  // section > table {
  //     width: 100%;
  // }

  // pre > code {
  //     width: 97%;
  // }

  // section > dl,
  // section > ol,
  // section > ul {
  //     width: 90%;
  // }

  // figure {
  //     max-width: 90%;
  // }

  // figcaption,
  // figure.fullwidth figcaption {
  //     margin-right: 0%;
  //     max-width: none;
  // }

  // blockquote {
  //     margin-left: 1.5em;
  //     margin-right: 0em;
  // }

  // blockquote p,
  // blockquote footer {
  //     width: 100%;
  // }

  // label.sidenote-toggle:not(.sidenote-number) {
  //     display: inline;
  // }

  // .rsn,
  // .lsn {
  //     display: none;
  // }

  // .sidenote-toggle:checked + .rsn,
  // .sidenote-toggle:checked + .lsn {
  //     display: block;
  //     float: left;
  //     left: 1rem;
  //     clear: both;
  //     width: 95%;
  //     margin: 1rem 2.5%;
  //     vertical-align: baseline;
  //     position: relative;
  // }

  // label {
  //     cursor: pointer;
  // }

  // div.table-wrapper,
  // table {
  //     width: 85%;
  // }

  // img {
  //     width: 100%;
  // }
  // }
}
